\environment ../algebra_env.lmtx

\startcomponent cover_page.lmtx

  % \setvariables
  %   [document]
  %   [titleA=A Variable in Algebra,
  %   titleB=A problem-oriented approach,
  %   author=Shiv Shankar Dayal]

%   \startpagemakeup

%     \startMPcode

%       StartPage ;

%         fill Page enlarged 10mm withcolor \MPcolor{purple} ;
%         draw anchored.lrt(image(draw textext("\getvariable{document}{titleA}")  xsized(.70PaperWidth)      withcolor white),(lrcorner Page) shifted (-PaperWidth/18, PaperWidth/3.5)) ;
%         draw anchored.lrt(image(draw textext("\getvariable{document}{titleB}")  xsized(.70PaperWidth)      withcolor white),(lrcorner Page) shifted (-PaperWidth/18, PaperWidth/4.5)) ;
% %        draw anchored.lrt(image(draw textext("\getvariable{document}{titleC}")  xsized(.750PaperWidth)      withcolor white),(lrcorner Page) shifted (-PaperWidth/20, PaperWidth/5)) ;
%         draw anchored.urt(image(draw textext("\getvariable{document}{author}")   xsized(.375PaperWidth) rotated 270 withcolor white),(urcorner Page) shifted (-PaperWidth/20,-PaperWidth/20)) ;

%         setbounds currentpicture to Page ;

%       StopPage ;

%     \stopMPcode

%   \stoppagemakeup
  \copypages[images/cover.pdf][n=1]
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Credit titles
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

  {
    \page[yes]
    \page[blank]\parindent0pt
    \ \vfill

    {\bf A Variable in Algebra}\\
    {\color[red]{Early Draft}} [\RevisionDate]\\
    \blank

    Copyright, \copyright~ Shiv Shankar Dayal, 2023. All rights reserved.\\\\
    Permission is granted to copy, distribute and/or modify this document under the
    terms of the GNU Free Documentation License, Version 1.3 or any later version
    published by the Free Software Foundation; with no Invariant Sections, no
    Front-Cover Texts, and no Back-Cover Texts. A copy of the license is included
    in the section entitled \quotation{GNU Free Documentation License}.

  }
  {
    \page[yes]
    \page[blank]\parindent0pt
    \blank[2*big]
    \startalignment [middle]
    {\it Dedicated to my family\\and Free Software Community}
    \stopalignment
  }

  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  % Table of contents
  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

  \starttitle
    [title={Table of Contents}]

    % Header
    \setupheadertexts
      [\tfx Table of Contents]
      [\tfx\pagenumber]

    % Format of entries in the ToC
    \setuplist
      [part]
      [
        before={\blank[2*big]},
        after={\blank[big]},
        style=\bfa,
        aligntitle=yes,
      ]

    \setuplist
      [chapter]
      [
        before=\blank,
        style=\bf,
        margin=.5cm,
        aligntitle=yes
      ]

    \setuplist
      [section]
      [
        aligntitle=yes,
        style=\tfx,
        margin=1.5cm
      ]

    % Let us define our list (called a Toc)
    \definecombinedlist
      [Toc]
      [part, chapter, section]
      [level=subsection, alternative=c]

    % and insert it in the context of smaller interline space
    \start
      \setupwhitespace[none]
      \switchtobodyfont[9pt]
      \setupinterlinespace[small]
      \placeToc
    \stop

  \stoptitle

\stopcomponent
